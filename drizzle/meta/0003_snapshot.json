{
  "id": "5d7882da-36b7-4ce8-aaac-8fe97febc8cd",
  "prevId": "41bfe2d1-f236-4bf7-aadf-582dd649af97",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.agent_config": {
      "name": "agent_config",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "agent_config_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "agent_type": {
          "name": "agent_type",
          "type": "agent_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "enabled": {
          "name": "enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "schedule_cron": {
          "name": "schedule_cron",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0 * * * *'"
        },
        "batch_size": {
          "name": "batch_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 100
        },
        "confidence_threshold": {
          "name": "confidence_threshold",
          "type": "double precision",
          "primaryKey": false,
          "notNull": true,
          "default": 0.9
        },
        "min_group_size_cron": {
          "name": "min_group_size_cron",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "min_group_size_context": {
          "name": "min_group_size_context",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "max_execution_ms": {
          "name": "max_execution_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 7000
        },
        "overlap_threshold": {
          "name": "overlap_threshold",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 10
        },
        "scan_new_events_only": {
          "name": "scan_new_events_only",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "last_processed_timestamp": {
          "name": "last_processed_timestamp",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "config": {
          "name": "config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "agent_config_agent_type_unique": {
          "name": "agent_config_agent_type_unique",
          "nullsNotDistinct": false,
          "columns": [
            "agent_type"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.agent_run_logs": {
      "name": "agent_run_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "agent_run_logs_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "run_id": {
          "name": "run_id",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "level": {
          "name": "level",
          "type": "agent_log_level",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'info'"
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_agent_logs_run": {
          "name": "idx_agent_logs_run",
          "columns": [
            {
              "expression": "run_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_agent_logs_timestamp": {
          "name": "idx_agent_logs_timestamp",
          "columns": [
            {
              "expression": "timestamp",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.agent_runs": {
      "name": "agent_runs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(64)",
          "primaryKey": true,
          "notNull": true
        },
        "agent_type": {
          "name": "agent_type",
          "type": "agent_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "run_mode": {
          "name": "run_mode",
          "type": "agent_run_mode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "agent_run_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'running'"
        },
        "anchor_node_id": {
          "name": "anchor_node_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "anchor_node_type": {
          "name": "anchor_node_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "nodes_processed": {
          "name": "nodes_processed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "nodes_matched": {
          "name": "nodes_matched",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "nodes_tagged": {
          "name": "nodes_tagged",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "batches_completed": {
          "name": "batches_completed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "processing_time_ms": {
          "name": "processing_time_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "batch_size": {
          "name": "batch_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 100
        },
        "confidence_threshold": {
          "name": "confidence_threshold",
          "type": "double precision",
          "primaryKey": false,
          "notNull": true,
          "default": 0.9
        },
        "min_group_size": {
          "name": "min_group_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "max_execution_ms": {
          "name": "max_execution_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 7000
        },
        "group_id": {
          "name": "group_id",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false
        },
        "group_size": {
          "name": "group_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "executive_summary": {
          "name": "executive_summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "findings": {
          "name": "findings",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_agent_runs_type_status": {
          "name": "idx_agent_runs_type_status",
          "columns": [
            {
              "expression": "agent_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_agent_runs_started": {
          "name": "idx_agent_runs_started",
          "columns": [
            {
              "expression": "started_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_agent_runs_group": {
          "name": "idx_agent_runs_group",
          "columns": [
            {
              "expression": "group_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ai_anomalies": {
      "name": "ai_anomalies",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "ai_anomalies_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "cache": "1",
            "cycle": false
          }
        },
        "metric": {
          "name": "metric",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "entityType": {
          "name": "entityType",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "entityId": {
          "name": "entityId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "value": {
          "name": "value",
          "type": "double precision",
          "primaryKey": false,
          "notNull": true
        },
        "score": {
          "name": "score",
          "type": "double precision",
          "primaryKey": false,
          "notNull": true
        },
        "threshold": {
          "name": "threshold",
          "type": "double precision",
          "primaryKey": false,
          "notNull": false
        },
        "win": {
          "name": "win",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "context": {
          "name": "context",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "ts": {
          "name": "ts",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "idx_ai_anomalies_entity_ts": {
          "name": "idx_ai_anomalies_entity_ts",
          "columns": [
            {
              "expression": "entityType",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "entityId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "ts",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_anomalies_metric_ts": {
          "name": "idx_ai_anomalies_metric_ts",
          "columns": [
            {
              "expression": "metric",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "ts",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ai_baselines": {
      "name": "ai_baselines",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "ai_baselines_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "cache": "1",
            "cycle": false
          }
        },
        "entityType": {
          "name": "entityType",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "entityId": {
          "name": "entityId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "features": {
          "name": "features",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ai_detections": {
      "name": "ai_detections",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "ai_detections_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "cache": "1",
            "cycle": false
          }
        },
        "eventId": {
          "name": "eventId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "channelId": {
          "name": "channelId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "label": {
          "name": "label",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "score": {
          "name": "score",
          "type": "double precision",
          "primaryKey": false,
          "notNull": false
        },
        "bbox": {
          "name": "bbox",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "embedding": {
          "name": "embedding",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "meta": {
          "name": "meta",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "ts": {
          "name": "ts",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "idx_ai_detections_channel_ts": {
          "name": "idx_ai_detections_channel_ts",
          "columns": [
            {
              "expression": "channelId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "ts",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_detections_event": {
          "name": "idx_ai_detections_event",
          "columns": [
            {
              "expression": "eventId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ai_inference_jobs": {
      "name": "ai_inference_jobs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "ai_inference_jobs_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "cache": "1",
            "cycle": false
          }
        },
        "sourceType": {
          "name": "sourceType",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "sourceId": {
          "name": "sourceId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'queued'"
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "error": {
          "name": "error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "idx_ai_jobs_status": {
          "name": "idx_ai_jobs_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_jobs_created": {
          "name": "idx_ai_jobs_created",
          "columns": [
            {
              "expression": "createdAt",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ai_insights": {
      "name": "ai_insights",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "ai_insights_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "cache": "1",
            "cycle": false
          }
        },
        "scope": {
          "name": "scope",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "scopeId": {
          "name": "scopeId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "summary": {
          "name": "summary",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "recommendations": {
          "name": "recommendations",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "context": {
          "name": "context",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "ts": {
          "name": "ts",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "idx_ai_insights_scope_ts": {
          "name": "idx_ai_insights_scope_ts",
          "columns": [
            {
              "expression": "scope",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "scopeId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "ts",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.channels": {
      "name": "channels",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "channelType": {
          "name": "channelType",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "latitude": {
          "name": "latitude",
          "type": "double precision",
          "primaryKey": false,
          "notNull": false
        },
        "longitude": {
          "name": "longitude",
          "type": "double precision",
          "primaryKey": false,
          "notNull": false
        },
        "address": {
          "name": "address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "tags": {
          "name": "tags",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "default": "'active'"
        },
        "region": {
          "name": "region",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "policeStation": {
          "name": "policeStation",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_channels_region": {
          "name": "idx_channels_region",
          "columns": [
            {
              "expression": "region",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_channels_status": {
          "name": "idx_channels_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.events": {
      "name": "events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "eventId": {
          "name": "eventId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "monitorId": {
          "name": "monitorId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "topic": {
          "name": "topic",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "module": {
          "name": "module",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "level": {
          "name": "level",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "startTime": {
          "name": "startTime",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "endTime": {
          "name": "endTime",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "latitude": {
          "name": "latitude",
          "type": "double precision",
          "primaryKey": false,
          "notNull": false
        },
        "longitude": {
          "name": "longitude",
          "type": "double precision",
          "primaryKey": false,
          "notNull": false
        },
        "channelId": {
          "name": "channelId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "channelType": {
          "name": "channelType",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "channelName": {
          "name": "channelName",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "channelAddress": {
          "name": "channelAddress",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "params": {
          "name": "params",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "tags": {
          "name": "tags",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_events_start_time": {
          "name": "idx_events_start_time",
          "columns": [
            {
              "expression": "startTime",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_events_topic": {
          "name": "idx_events_topic",
          "columns": [
            {
              "expression": "topic",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_events_channel": {
          "name": "idx_events_channel",
          "columns": [
            {
              "expression": "channelId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_events_level": {
          "name": "idx_events_level",
          "columns": [
            {
              "expression": "level",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.incident_notes": {
      "name": "incident_notes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "incident_notes_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "incident_id": {
          "name": "incident_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "note": {
          "name": "note",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.incident_tags": {
      "name": "incident_tags",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "incident_tags_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "incident_id": {
          "name": "incident_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "tag": {
          "name": "tag",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "color": {
          "name": "color",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.incidents": {
      "name": "incidents",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "incidentType": {
          "name": "incidentType",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "priority": {
          "name": "priority",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'open'"
        },
        "location": {
          "name": "location",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "region": {
          "name": "region",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "latitude": {
          "name": "latitude",
          "type": "double precision",
          "primaryKey": false,
          "notNull": false
        },
        "longitude": {
          "name": "longitude",
          "type": "double precision",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "videoUrl": {
          "name": "videoUrl",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "assignedOfficer": {
          "name": "assignedOfficer",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "assignedUnit": {
          "name": "assignedUnit",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "responseTime": {
          "name": "responseTime",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "eventIds": {
          "name": "eventIds",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "resolvedAt": {
          "name": "resolvedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_incidents_status": {
          "name": "idx_incidents_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_incidents_priority": {
          "name": "idx_incidents_priority",
          "columns": [
            {
              "expression": "priority",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_incidents_region": {
          "name": "idx_incidents_region",
          "columns": [
            {
              "expression": "region",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_incidents_created": {
          "name": "idx_incidents_created",
          "columns": [
            {
              "expression": "createdAt",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.pole_entities": {
      "name": "pole_entities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "entityType": {
          "name": "entityType",
          "type": "entity_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "attributes": {
          "name": "attributes",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "threatLevel": {
          "name": "threatLevel",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "relatedEntities": {
          "name": "relatedEntities",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_pole_entities_type": {
          "name": "idx_pole_entities_type",
          "columns": [
            {
              "expression": "entityType",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_pole_entities_threat": {
          "name": "idx_pole_entities_threat",
          "columns": [
            {
              "expression": "threatLevel",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.snapshots": {
      "name": "snapshots",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(255)",
          "primaryKey": true,
          "notNull": true
        },
        "eventId": {
          "name": "eventId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "path": {
          "name": "path",
          "type": "varchar(1000)",
          "primaryKey": false,
          "notNull": false
        },
        "imageUrl": {
          "name": "imageUrl",
          "type": "varchar(1000)",
          "primaryKey": false,
          "notNull": false
        },
        "cloudinaryPublicId": {
          "name": "cloudinaryPublicId",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "gemini_processed": {
          "name": "gemini_processed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "gemini_processed_at": {
          "name": "gemini_processed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "gemini_model_used": {
          "name": "gemini_model_used",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "gemini_error": {
          "name": "gemini_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_snapshots_event_id": {
          "name": "idx_snapshots_event_id",
          "columns": [
            {
              "expression": "eventId",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_snapshots_type": {
          "name": "idx_snapshots_type",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_snapshots_gemini_processed": {
          "name": "idx_snapshots_gemini_processed",
          "columns": [
            {
              "expression": "gemini_processed",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.system_config": {
      "name": "system_config",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "system_config_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "key": {
          "name": "key",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.topology_reports": {
      "name": "topology_reports",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar(64)",
          "primaryKey": true,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "createdByUserId": {
          "name": "createdByUserId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "createdByUserName": {
          "name": "createdByUserName",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "nodeIds": {
          "name": "nodeIds",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "edgeIds": {
          "name": "edgeIds",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "nodeCount": {
          "name": "nodeCount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "edgeCount": {
          "name": "edgeCount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "flagged": {
          "name": "flagged",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "flaggedAt": {
          "name": "flaggedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "shareToken": {
          "name": "shareToken",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_topology_reports_created": {
          "name": "idx_topology_reports_created",
          "columns": [
            {
              "expression": "createdAt",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_topology_reports_flagged": {
          "name": "idx_topology_reports_flagged",
          "columns": [
            {
              "expression": "flagged",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_topology_reports_share_token": {
          "name": "idx_topology_reports_share_token",
          "columns": [
            {
              "expression": "shareToken",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "users_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "2147483647",
            "cache": "1",
            "cycle": false
          }
        },
        "openId": {
          "name": "openId",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "varchar(320)",
          "primaryKey": false,
          "notNull": false
        },
        "loginMethod": {
          "name": "loginMethod",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false
        },
        "role": {
          "name": "role",
          "type": "user_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'user'"
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "lastSignedIn": {
          "name": "lastSignedIn",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.webhook_requests": {
      "name": "webhook_requests",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "identity": {
            "type": "always",
            "name": "webhook_requests_id_seq",
            "schema": "public",
            "increment": "1",
            "startWith": "1",
            "minValue": "1",
            "maxValue": "9223372036854775807",
            "cache": "1",
            "cycle": false
          }
        },
        "endpoint": {
          "name": "endpoint",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "method": {
          "name": "method",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "eventId": {
          "name": "eventId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "level": {
          "name": "level",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "module": {
          "name": "module",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "default": "'success'"
        },
        "error": {
          "name": "error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "processingTime": {
          "name": "processingTime",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_webhook_requests_created": {
          "name": "idx_webhook_requests_created",
          "columns": [
            {
              "expression": "createdAt",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_webhook_requests_level": {
          "name": "idx_webhook_requests_level",
          "columns": [
            {
              "expression": "level",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_webhook_requests_module": {
          "name": "idx_webhook_requests_module",
          "columns": [
            {
              "expression": "module",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.agent_log_level": {
      "name": "agent_log_level",
      "schema": "public",
      "values": [
        "debug",
        "info",
        "warn",
        "error"
      ]
    },
    "public.agent_run_mode": {
      "name": "agent_run_mode",
      "schema": "public",
      "values": [
        "cron",
        "manual",
        "context"
      ]
    },
    "public.agent_run_status": {
      "name": "agent_run_status",
      "schema": "public",
      "values": [
        "running",
        "completed",
        "failed",
        "discarded"
      ]
    },
    "public.agent_type": {
      "name": "agent_type",
      "schema": "public",
      "values": [
        "timeline",
        "correlation",
        "anomaly"
      ]
    },
    "public.entity_type": {
      "name": "entity_type",
      "schema": "public",
      "values": [
        "person",
        "object",
        "location",
        "event"
      ]
    },
    "public.user_role": {
      "name": "user_role",
      "schema": "public",
      "values": [
        "user",
        "admin"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}